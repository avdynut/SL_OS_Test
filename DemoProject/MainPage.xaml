<UserControl x:Class="DemoProject.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             xmlns:VirtuosoCoreControls="clr-namespace:Virtuoso.Core.Controls"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
             xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
             d:DesignHeight="300"
             d:DesignWidth="400"
             mc:Ignorable="d">

    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.Resources>
            <Style x:Key="CoreBusyIndicatorStyleDefault" TargetType="toolkit:BusyIndicator">
                <Setter Property="BusyContent" Value="Please wait..."/>
                <Setter Property="IsTabStop" Value="False"/>
                <Setter Property="OverlayStyle">
                    <Setter.Value>
                        <Style TargetType="Rectangle">
                            <Setter Property="Fill" Value="White"/>
                            <Setter Property="Opacity" Value="0"/>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="toolkit:BusyIndicator">
                            <Grid>
                                <Grid.Resources>
                                    <Storyboard x:Name="BusyAnimation" RepeatBehavior="Forever">
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Storyboard.TargetName="Note1"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.3000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.2000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Storyboard.TargetName="Note2"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.4000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Storyboard.TargetName="Note3"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.9000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.6000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.8000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Storyboard.TargetName="Note4"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.2000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:01.8000000" Value="1"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:02" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </Grid.Resources>
                                <ContentControl x:Name="content"
                                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                Content="{TemplateBinding Content}"
                                                ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                <Rectangle x:Name="overlay" Style="{TemplateBinding OverlayStyle}"/>
                                <ContentPresenter x:Name="busycontent">
                                    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="Loaded">
                                                <ei:ControlStoryboardAction Storyboard="{StaticResource BusyAnimation}"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                        <Border HorizontalAlignment="Center"
                                                Background="#5385f1"
                                                BorderThickness="1"
                                                CornerRadius="2">
                                            <Border.BorderBrush>
                                                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                                    <GradientStop Offset="0" Color="#FFA3AEB9"/>
                                                    <GradientStop Offset="0.375" Color="#FF8399A9"/>
                                                    <GradientStop Offset="0.375" Color="#FF718597"/>
                                                    <GradientStop Offset="1" Color="#FF617584"/>
                                                </LinearGradientBrush>
                                            </Border.BorderBrush>
                                            <Border Margin="1"
                                                    Background="#BFFFFFFF"
                                                    CornerRadius="1.5">
                                                <Grid MinWidth="150">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <ContentPresenter Margin="8"
                                                                      Content="{TemplateBinding BusyContent}"
                                                                      ContentTemplate="{TemplateBinding BusyContentTemplate}"/>
                                                    <Canvas Grid.Row="1"
                                                            Height="50"
                                                            Margin="3,0,3,3">
                                                        <Rectangle Canvas.Left="5"
                                                                   Canvas.Top="6"
                                                                   Width="133"
                                                                   Height="1"
                                                                   d:IsLocked="True"
                                                                   Fill="#5385f1"
                                                                   StrokeThickness="0"/>
                                                        <Rectangle Canvas.Left="5"
                                                                   Canvas.Top="15"
                                                                   Width="133"
                                                                   Height="1"
                                                                   d:IsLocked="True"
                                                                   Fill="#5385f1"
                                                                   StrokeThickness="0"/>
                                                        <Rectangle Canvas.Left="5"
                                                                   Canvas.Top="24"
                                                                   Width="133"
                                                                   Height="1"
                                                                   d:IsLocked="True"
                                                                   Fill="#5385f1"
                                                                   StrokeThickness="0"/>
                                                        <Rectangle Canvas.Left="5"
                                                                   Canvas.Top="33"
                                                                   Width="133"
                                                                   Height="1"
                                                                   d:IsLocked="True"
                                                                   Fill="#5385f1"
                                                                   StrokeThickness="0"/>
                                                        <Rectangle Canvas.Left="5"
                                                                   Canvas.Top="42"
                                                                   Width="133"
                                                                   Height="1"
                                                                   d:IsLocked="True"
                                                                   Fill="#5385f1"
                                                                   StrokeThickness="0"/>
                                                        <Path x:Name="Note1"
                                                              Canvas.Left="12"
                                                              Canvas.Top="12.5"
                                                              Width="16.07"
                                                              Height="34.5"
                                                              Data="M36.257999,12 L36.25779,39 C36.25779,39 31.848457,36.082722 27.25761,36.5 C21.756657,37 22.757883,42 22.758125,42 C22.758139,42 23.757496,46.5 29.757694,46.5 C38.757992,46.5 38.757992,42 38.757996,42 C38.757996,42 38.757996,12 38.757996,12 z"
                                                              Fill="#113cca"
                                                              Opacity="0"
                                                              Stretch="Fill"
                                                              StrokeThickness="0"
                                                              UseLayoutRounding="False"/>
                                                        <Path x:Name="Note2"
                                                              Canvas.Left="45.4"
                                                              Canvas.Top="3.5"
                                                              Width="16.07"
                                                              Height="34.5"
                                                              Data="M36.257999,12 L36.25779,39 C36.25779,39 31.848457,36.082722 27.25761,36.5 C21.756657,37 22.757883,42 22.758125,42 C22.758139,42 23.757496,46.5 29.757694,46.5 C38.757992,46.5 38.757992,42 38.757996,42 C38.757996,42 38.757996,12 38.757996,12 z"
                                                              Fill="#113cca"
                                                              Opacity="0"
                                                              Stretch="Fill"
                                                              StrokeThickness="0"
                                                              UseLayoutRounding="False"/>
                                                        <Path x:Name="Note3"
                                                              Canvas.Left="79.4"
                                                              Canvas.Top="8.5"
                                                              Width="16.07"
                                                              Height="34.5"
                                                              Data="M36.257999,12 L36.25779,39 C36.25779,39 31.848457,36.082722 27.25761,36.5 C21.756657,37 22.757883,42 22.758125,42 C22.758139,42 23.757496,46.5 29.757694,46.5 C38.757992,46.5 38.757992,42 38.757996,42 C38.757996,42 38.757996,12 38.757996,12 z"
                                                              Fill="#113cca"
                                                              Opacity="0"
                                                              Stretch="Fill"
                                                              StrokeThickness="0"
                                                              UseLayoutRounding="False"/>
                                                        <Path x:Name="Note4"
                                                              Canvas.Left="113.4"
                                                              Canvas.Top="-0.5"
                                                              Width="16.07"
                                                              Height="34.5"
                                                              Data="M36.257999,12 L36.25779,39 C36.25779,39 31.848457,36.082722 27.25761,36.5 C21.756657,37 22.757883,42 22.758125,42 C22.758139,42 23.757496,46.5 29.757694,46.5 C38.757992,46.5 38.757992,42 38.757996,42 C38.757996,42 38.757996,12 38.757996,12 z"
                                                              Fill="#113cca"
                                                              Opacity="0"
                                                              Stretch="Fill"
                                                              StrokeThickness="0"
                                                              UseLayoutRounding="False"/>
                                                    </Canvas>
                                                </Grid>
                                            </Border>
                                        </Border>
                                    </Grid>
                                </ContentPresenter>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="VisibilityStates">
                                        <VisualState x:Name="Hidden">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                               Storyboard.TargetName="busycontent"
                                                                               Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                               Duration="00:00:00.001">
                                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Collapsed</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                               Storyboard.TargetName="overlay"
                                                                               Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                               Duration="00:00:00.001">
                                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Collapsed</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Visible">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                               Storyboard.TargetName="busycontent"
                                                                               Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                               Duration="00:00:00.001">
                                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Visible</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                               Storyboard.TargetName="overlay"
                                                                               Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                               Duration="00:00:00.001">
                                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Visible</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                    <VisualStateGroup x:Name="BusyStatusStates">
                                        <VisualState x:Name="Idle">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                               Storyboard.TargetName="content"
                                                                               Storyboard.TargetProperty="(Control.IsEnabled)"
                                                                               Duration="00:00:00.001">
                                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <System:Boolean>True</System:Boolean>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Busy">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                               Storyboard.TargetName="content"
                                                                               Storyboard.TargetProperty="(Control.IsEnabled)"
                                                                               Duration="00:00:00.001">
                                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <System:Boolean>False</System:Boolean>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <CheckBox x:Name="busyCheckbox" Content="IsBusy"/>
        <VirtuosoCoreControls:VirtuosoBusyIndicator Grid.Row="1"
                                                    Style="{StaticResource CoreBusyIndicatorStyleDefault}">
            <Grid Background="Gray">
                <VirtuosoCoreControls:VirtuosoBusyIndicator Grid.Row="1"
                                                    IsBusy="{Binding ElementName=busyCheckbox, Path=IsChecked}"
                                                    Style="{StaticResource CoreBusyIndicatorStyleDefault}">
                    <Grid Background="Gray">
                        <TextBlock Text="Content"/>
                    </Grid>
                </VirtuosoCoreControls:VirtuosoBusyIndicator>
                <TextBlock Text="Content"/>
            </Grid>
        </VirtuosoCoreControls:VirtuosoBusyIndicator>
    </Grid>
</UserControl>
